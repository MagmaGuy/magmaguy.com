# ダンジョンのパッケージング

最後に、ダンジョンを保存または配布するために、パッケージングを行う必要があるでしょう。

EliteMobs には、管理者がコンテンツをすばやくインポート、インストール、アンインストールできるインポートシステムがあります。[動作方法はこちらをご覧ください。]($language$/elitemobs/setup.md)

## ワールドのトリミング

ワールドを軽量化し、配布しやすくするために、Minecraft ワールドのサイズを縮小する必要がある場合があります。これは、[WorldBorder プラグイン](https://www.spigotmc.org/resources/worldborder-1-15.80466/) を使用して実現できます。このプラグインは、バージョン 1.19 までの MineCraft のみをサポートすると記載されていますが、2024 年 1 月 25 日現在、最新の MineCraft バージョンでも問題なく機能します。

<details>
<summary>ヒント</summary>
初めてこれを行う場合は、万が一に備えて、ワールドのバックアップを作成することをお勧めします。
</details>

プラグインがインストールされたら、ワールドの中央またはトリミングしたい特定のエリアに移動します。次に、コマンド `/wb set x` を実行します。ここで、`x` は、エリアの概算半径サイズを表します。

<details>
<summary>ヒント</summary>
<code>/wb</code> が機能しない場合は、<code>/worldborder:wb</code> を試してください。
</details>

このコマンドを実行した後、ワールドの端まで飛んで、ワールドボーダーが正しく設定され、目的のサイズをカバーしていることを確認します。ワールドボーダーの端まで到達すると、チャットにメッセージが表示され、押し戻されます。

![trim_pic_1.jpg](../../../img/wiki/trim_pic_1.jpg)

上記の画像では、紫色のブロックの周りのワールドをトリミングして、その周りの数チャンクのみを残すことを目指しています。これを実現するために、赤い正方形で紫色のエリアの中央に立ち、`/wb set 50` を実行して、ワールドボーダーを紫色のエリアのすぐ外側に設定します。

次に、`/wb trim [freq] [pad]` コマンドを使用します。周波数は 200、パッドは 20 に設定します。パッドは、ワールドボーダー (紫色のエリア) の周りに残すチャンク数を決定し、周波数は 1 秒間に処理するチャンク数を決定します。`/wb trim 200 20` を実行した後、`/wb trim confirm` を実行して確認を求められます。アクションを確認すると、しばらくするとワールドがトリミングされ、サイズが小さくなり、配布がより簡単になります。

これで、`/wb clear all` を使用してワールドボーダーを削除するか、必要に応じてそのままにしておくことができます。

## ワールドフォルダーのトリミング

ワールドフォルダーには、プラグインで使用しないものがいくつかあります。これらのファイルやフォルダーを削除すると、ワールドのサイズが縮小され、配布が容易になります。

NORMAL ワールド環境の場合:

ワールドを準備するには、次のファイルとフォルダーを保持します。

1. **region** フォルダー
2. **data** フォルダー内の **raids.dat** (コピーする際には、**data** フォルダー内にあることを確認してください)
3. **level.dat** ファイル

ワールドフォルダー内の他のすべてのファイルとフォルダーを安全に削除できます。これにより、ワールドが NORMAL 環境に対して正しく設定されます。

NETHER および THE_END ワールド環境の場合:

ワールドを準備するには、次のファイルとフォルダーを保持します。

1. **DIM-1** フォルダー内の **region** フォルダー (コピーする際には、**DIM-1** フォルダー内にあることを確認してください)
2. **data** フォルダー内の **raids.dat** (コピーする際には、**data** フォルダー内にあることを確認してください)
3. **level.dat** ファイル

ワールドフォルダー内の他のすべてのファイルとフォルダーを安全に削除できます。これにより、ワールドが NETHER および THE_END 環境に対して正しく設定されます。

## パッケージコマンドの実行

EliteMobs には、**`/em package <dungeonName> <version>`** コマンドがあります。このコマンドは、EliteMobs のすべての構成フォルダーを調べ、`dungeonName` と一致するフォルダー内のすべてのコンテンツを、EliteMobs の `exports` フォルダー内の ZIP ファイルと通常のフォルダーに自動的にパッケージングします。

***このため、パッケージングするコンテンツは、パッケージ名と同じ名前のフォルダーに保管することを強くお勧めします。*** そうしないと、手動でファイルを収集して、配布用のファイル構造にパッケージングする必要があります。

## ダンジョンパッケージファイルの追加

ダンジョンを作成する場合は、エクスポートフォルダーの新しく生成されたフォルダーに、ダンジョンパッケージファイルを手動で追加する必要があります。ダンジョンパッケージの構成ファイルは、上記で説明した形式に従う必要があり、`dungeonpackages` という名前のフォルダーに配置する必要があります。[ファイル構造の詳細については、こちらをご覧ください。](#file-structure).

**完了したら、ダンジョンを ZIP 圧縮してください！**

## ファイル構造

すべてが正しく完了していれば、ファイル構造は次の例のようになります。ここでは、ダンジョンを `my_cool_dungeon` と名付けました。

<details>
<summary>my_cool_dungeon ファイル構造の例</summary>

- my_cool_dungeon.zip
    * dungeonpackages
        * my_cool_dungeon.yml <- ここにダンジョンパッケージの構成ファイルが配置されます
    * worldcontainer
        * [ワールドフォルダーがここに配置されます]
    * wormholes
        * my_cool_dungeon
            * [ワームホールがここに配置されます]
    * npcs
        * my_cool_dungeon
            * [NPC がここに配置されます]
    * customtreasurechests
        * my_cool_dungeon
            * [宝箱がここに配置されます]
    * customquests
        * my_cool_dungeon
            * [クエストがここに配置されます]
    * customitems
        * my_cool_dungeon
            * [カスタムアイテムがここに配置されます]
    * custombosses
        * my_cool_dungeon
            * [カスタムボスがここに配置されます]
    * customarenas
        * my_cool_dungeon
            * [カスタムアリーナがここに配置されます]
    * powers
        * my_cool_dungeon
            * [カスタムパワーがここに配置されます]
    * world_blueprints
        * my_cool_dungeon
            * [ワールドフォルダーがここに配置されます。インスタンス化されたダンジョンに使用されます]
    * customevents
        * my_cool_dungeon
            * [カスタムイベントがここに配置されます]
    * customspawns
        * my_cool_dungeon
            * [カスタムスポーンがここに配置されます]
    * models
        * [ModelEngine bbmodel 形式のモデルがここに配置されます。フォルダーを受け付けます]

</details>

これにより、ほとんどのユーザーはファイルを直接サーバーにドラッグアンドドロップして、すぐに動作させることができます。

***重要: 配布のためにパッケージングする場合は、最初にミニダンジョンをアンインストールしてください！インストール済みのミニダンジョンを配布するのではなく、管理者がサーバーにセットアップできるようにしてください！***

# 作成したダンジョンパッケージをコミュニティと共有する

Discord には、[#community_dungeons](https://discord.gg/7Pnd7EjdZq "#community_dungeons") セクションがあり、そこでユーザーは作成したミニダンジョンを共有できます。ぜひご参加ください！


```





