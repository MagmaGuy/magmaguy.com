日本語に翻訳します。

# ボスフェーズの作成

ボスフェーズは、カスタムボスのサブメカニクスです。このフェーズの背後にあるシステムは非常に柔軟で強力であるため、この機能をうまく活用できるように、専用の説明が必要です。

### ボスフェーズはどのように機能しますか？

EliteMobsの任意のカスタムボスに、以下の設定形式を使用してボスフェーズを追加できます。

```yaml
phases:
- phase_2_boss.yml:0.X
- phase_3_boss.yml:0.Y
```

_**注：他のすべてのフェーズの情報を含む、最初にスポーンするボスはフェーズ1ボスと呼ばれます。これは`phases`エントリに含めるべきではありません。**_

このメカニクスの基本的な意図は、管理者が戦闘中にカスタムボスの属性を変更できるようにすることです。上記の設定形式を使用することで、フェーズごとに設定ファイルを完全に変更できます。つまり、パワー、ダメージ倍率、体力倍率、エンティティタイプ、変装、着用防具など、99.99%の属性を変更できます。

これを実現するために、EliteMobsは戦闘中にボスを削除し、次のフェーズのバージョンと即座に置き換えます。このプロセスは瞬時に行われるため、意図的に派手にしたくない限り、非常にシームレスになる傾向があります。

### 例

この例のフェーズボスを見てみましょう。

ファイル：phase_1_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- phase_2_boss.yml:0.60
- phase_3_boss.yml:0.30
```

ファイル：phase_2_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```

ファイル：phase_3_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

これは有効なフェーズボスを構成します。phase_1_boss.ymlをスポーンすると、上記の属性を持つストレイがスポーンします。体力が_60%_までダメージを受けると、設定ファイルが`- phase_2_boss.yml:0.60`と指定しているため（_phase_2_boss.ymlはそのカスタムボスのファイル名、0.60は体力60%_）、同じ場所にphase_2_boss.ymlで構成されたカスタムボスと即座に置き換えられます。_フェーズ2ボスは、そのフェーズに移行した時点の体力である60%の体力でスポーンすることに注意してください。_ボスはphase_2_boss.ymlファイルにリストされているパワーを持ちます。フェーズ2ボスが体力の30%までダメージを受けると、フェーズ3に設定されたボスがスポーンします。フェーズ3のパワーはそれ以前のものとは無関係であることに注意してください。他のほぼすべての属性と同様に、フェーズ間でパワーを完全に変更できます。

## 上級

### 継承されるメカニクス

フェーズ間で変更されないもののリストです。

- チェーンの最初のフェーズボスが、ボスがどのフェーズを通過するかを決定します。つまり、チェーン内の他のボスに`phases`エントリを記述すべきではありません。

- 脅威テーブル/ダメージテーブルは同じままです。つまり、ルート分配と高度なアグロシステムはフェーズ変更の影響を受けません。

- フェーズの切り替えは失われた体力の%に基づいています。これはフェーズ間で維持されます。つまり、ボスが体力50%でフェーズ2に入るように設定されている場合、フェーズ1ボスを置き換えるために出現するボスは依然として体力50%のままです。これは、各フェーズが完全に異なる量の体力を持っていても問題を引き起こさないことも意味します。

- フェーズボスがデフォルトの戦闘外ボス再生システムによって全回復した場合、フェーズ1に戻ります。

- リージョンボスでもあるフェーズボスは、すべてのフェーズで同じ引き戻し範囲とタイムアウトメカニクスを共有し、リスポーンタイマーが終了するとフェーズ1ボスとしてリスポーンします。

#### 警告

最初は直感に反する可能性がある方法で機能するメカニクスのリストです。

- フェーズボスがどのフェーズで倒されても、そのフェーズのルートをドロップします。つまり、誰かがフェーズボスをあまりにも早く（1ショットで）倒した場合、実際に死亡し、そのボスファイルに設定されているルートをドロップします。これは必ずしも最終フェーズのものではない可能性があります。これを修正するには、このフェーズボスのすべてのボスファイルでルートテーブルを同じに設定するか、フェーズボスが数回のヒットで倒すのが不可能なほど十分なHPを持つようにします。あるいは、フェーズをスキップできるプレイヤーのために特別なルートテーブルを用意することもできます。

- フェーズボスは戦闘中にカスタムボスを実際にスポーンさせるため、スポーン時に完全なスポーンルーチンを実行します。したがって、スポーンメッセージやスポーン時に実行されるコマンドには注意が必要です。さらに、フェーズボスはフェーズを変更しても死亡しません。単に別のものと交換されるだけです。つまり、死亡時に実行されるコマンドは、最後のフェーズボスに対してのみ、またはプレイヤーが十分なダメージを与えてフェーズをスキップした場合にのみ実行されます。スポーン時に実行されるコマンドは、フェーズ変更にフックするために使用できます。\*注：\* フェーズボスが全回復してリスポーンした場合、フェーズ1ボスのスポーンメッセージは再度送信されません。

- フェーズボスは、フェーズ間でマウントされた状態になったり、マウントを解除したりできます。マウントが死ぬ前にフェーズボスが倒された場合、マウントは次のフェーズに引き継がれます。ボスが全回復した場合、マウントは削除され、ボスはマウントされていない状態になります。ただし、フェーズ1でエンティティをマウントするように設定されている場合は例外です。

- フェーズ間で新しいカスタムボスがスポーンされるため、1回限りのスポーンメカニクスはフェーズ間および全回復時にリセットされます。

### ヒントとコツ

- 戦闘中に装備やエンティティタイプを変更できるという事実を利用して、ボスを戦闘全体でますます（またはますます少なく）危険に見せることができます。

- 可能ではありますが、特定の設計目標がない限り、フェーズボスが持つパワーがフェーズ間で劇的に変化しないようにするのがおそらく最善です。プレイヤーは戦闘全体で自然に感じられる進行をより楽しむ可能性が高いからです。

- `onSpawn`コマンドを使用して、フェーズ間でコマンドを実行できます。

- フェーズを使用して、ボスを近接モードから遠距離モードに、またはその逆に切り替えることができます。

- フェーズボスは、多くのHPを持つタフなボスとして構築されました。通常、ダンジョンの最終ボスエンカウンターや大きなワールドボスとして最適です。

- エンカウンターを設計する際には、フェーズ間で援軍がプレイヤーによって倒されない可能性があることを念頭に置いてください。

- ボスは好きなだけ多くのフェーズを持つことができますが、フェーズが多いほど、各フェーズを意味のあるものにするために必要な体力も多くなります。