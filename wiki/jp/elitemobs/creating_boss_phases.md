# ボスフェーズの作成

ボスフェーズは、カスタムボスのサブメカニックです。これらのフェーズの背後にあるシステムは非常に柔軟で強力であるため、この機能を十分に活用するために、専用の説明が必要です。

### ボスフェーズはどのように機能するのか？

ボスフェーズは、EliteMobs の任意のカスタムボスに、次の設定形式を使用して追加できます。

```yaml
phases:
- phase_2_boss.yml:0.X
- phase_3_boss.yml:0.Y
```

_**注：すべての他のフェーズの情報を含む最初にスポーンするボスは、フェーズ1ボスと呼ばれます。phasesエントリには含めないでください。
**_

このメカニックの基本的な意図は、戦闘中にカスタムボスの属性を変更できるようにすることです。上記の設定形式を使用することで、フェーズごとに構成ファイルを完全に変更できます。つまり、パワー、ダメージ乗数、体力乗数、エンティティタイプ、変装、装備している鎧など、99.99％の属性を変更できます。

これを実現するために、EliteMobs
は戦闘中にボスを削除し、次のフェーズのバージョンにすぐに置き換えます。この背後にあるプロセスは瞬時であるため、かなりシームレスになる傾向があります。ただし、意図的に派手にする場合は別です。

### 例

この例のフェーズボスを見てみましょう。

ファイル：phase_1_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- phase_2_boss.yml:0.60
- phase_3_boss.yml:0.30
```

ファイル：phase_2_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```

ファイル：phase_3_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

これは有効なフェーズボスを構成します。phase_1_boss.yml をスポーンすると、上記にリストされている属性を持つストレイがスポーンします。体力が
_60%_ に減少すると、すぐに phase_2_boss.yml
で作成されたカスタムボスと同じ場所に置き換えられます。これは、設定ファイルに `- phase_2_boss.yml:0.60` と記述されているためです（
_phase_2_boss.yml はそのカスタムボスのファイル名で、0.60 は体力の 60%_）。
_フェーズ2ボスはそのフェーズに変わるときに、体力の60％でスポーンすることに注意してください。_ ボスは phase_2_boss.yml
ファイルにリストされているパワーを持つようになります。フェーズ 2 ボスの体力が 30% に減少すると、フェーズ 3
に設定されたボスがスポーンします。フェーズ 3 のパワーは以前のものとは無関係であることに注意してください。他のほぼすべての属性と同様に、フェーズ間でパワーを完全に変更できます。

## 高度な設定

### 継承されたメカニズム

以下は、フェーズ間で変更されないもののリストです。

- チェーンの最初のフェーズボスは、ボスが通過するフェーズを決定します。つまり、他のフェーズのボスにはフェーズのエントリを配置しないでください。

- 脅威テーブル/ダメージテーブルは同じままです。つまり、戦利品の分配と高度なアグロシステムは、フェーズの変更の影響を受けません。

- フェーズの切り替えは、失われた体力の割合に基づいており、これはフェーズ間で保持されます。つまり、ボスが体力 50% でフェーズ
  2 に入るように設定されている場合、フェーズ 1 ボスを置き換えるために表示されるボスは、依然として体力 50%
  になります。これは、各フェーズで問題を引き起こすことなく、完全に異なる量の体力を持つことができることも意味します。

- フェーズボスは、デフォルトの戦闘外ボス再生システムによって体力が全回復した場合、フェーズ1に戻ります。

- 地域ボスでもあるフェーズボスは、すべてのフェーズで同じリーシュ半径とタイムアウトメカニズムを共有し、リスポーンタイマーが終了すると、フェーズ1ボスとしてリスポーンします。

#### 警告

以下は、直感的ではない可能性のある方法で機能するメカニズムのリストです。

-
フェーズボスが任意のフェーズで倒された場合、そのフェーズからの戦利品をドロップします。つまり、誰かがフェーズボスを（一撃で）速く倒した場合、実際には死亡し、そのボスファイル用に構成された戦利品をドロップします。これは、必ずしも最終フェーズであるとは限りません。この問題を解決するには、このフェーズボスのすべてのボスファイルで戦利品テーブルを同じに設定するか、フェーズボスが数回ヒットしただけでは倒せない程度に十分なHPを持っていることを確認してください。または、フェーズをスキップできる人のために特別な戦利品テーブルを用意することもできます。

-
フェーズボスは実際には戦闘中にカスタムボスをスポーンさせるため、スポーン時にスポーンルーチン全体を実行します。そのため、スポーンメッセージやスポーン時に実行されるコマンドには注意してください。さらに、フェーズボスはフェーズを変更しても死亡しません。単に他のものと交換されるだけです。つまり、死亡時に実行されるコマンドは、最後のフェーズボスの場合、またはプレイヤーが十分なダメージを与えてフェーズをスキップできた場合にのみ実行されます。スポーン時に実行されるコマンドを使用して、フェーズの変更にフックできます。\*注：\*フェーズボスが体力全回復によってリスポーンした場合、フェーズ1ボスに対してスポーンメッセージは再び送信されません。

-
フェーズボスは、フェーズ間でマウントされたり、マウントされなくなる可能性があります。マウントが死亡する前にフェーズボスが倒された場合、マウントは次のフェーズまで存続します。ボスが全回復した場合、マウントは削除され、ボスはマウントされなくなります。ただし、フェーズ
1 中にエンティティをマウントするように構成されている場合は除きます。

- フェーズ間で新しいカスタムボスがスポーンするため、1 回限りのスポーンメカニズムは、フェーズ間および全回復時にリセットされます。

### ヒントとコツ

- 戦闘中に装備やエンティティタイプを変更できるという事実を利用して、戦闘を通じてボスをますます危険（または危険でない）に見せることができます。

- 可能ではありますが、特定の設計目標がない限り、フェーズボスが持つパワーは、戦闘全体を通して自然に感じられる進行を楽しむ可能性が高いため、フェーズ間で劇的に変化しないようにするのがおそらく最善です。

- onSpawnコマンドを使用して、フェーズ間でコマンドを実行できます。

- フェーズを使用して、ボスを近接モードから遠隔モードに、またはその逆に切り替えることができます。

- フェーズボスは、HPがたくさんあるタフなボスとして構築されました。それらは通常、ダンジョンの最後のボスエンカウンターまたは大きなワールドボスとして最適です。

- エンカウンターを設計する際は、プレイヤーがフェーズ間で増援を倒さない可能性があることに注意してください。

- ボスは必要なだけフェーズを持つことができますが、フェーズが多いほど、各フェーズを重要にするために必要な体力は増えます。
