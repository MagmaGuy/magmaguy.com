EliteMobs 7.3.12
から、カスタムモデルが [Model Engine](https://mythiccraft.io/index.php?resources/model-engine%E2%80%94ultimate-entity-model-manager-1-16-5-1-20-4.389/)
と [FreeMineCraftModels](https://www.spigotmc.org/resources/free-minecraft-models.111660/) を通じて EliteMobs に追加されました。

# 前書き

EliteMobs の視点からすると、カスタムモデルシステムは非常にシンプルで、管理者が行う必要があるのは、NPC
またはカスタムボス設定ファイルに、どのカスタムモデルを使用するかを記述する行を追加することだけです。ただし、Model Engine と
Minecraft でこのシステムを完全に機能させるためには、正しい手順を踏む必要があり、これらは簡単には理解できません。

このガイドでは、Model Engine と Minecraft のインターフェースについて詳しく説明します。Blockbench を使用してカスタムボスを作成する方法や、Model
Engine の仕組みについては説明しません。それらの方法については、すでに多くのガイドがあり、これらのシステムについて詳しく知りたい場合は、直接ドキュメントを参照する方が良いでしょう。

## FreeMineCraft Models

FMM を使用してモデルを動作させる方法を学びたい場合は、[こちら]($language$/freeminecraftmodels/info.md) の wiki
ページで詳細を確認できます。

# 最小要件

EliteMobs 7.3.12 以降、Model Engine R2.2.0\* 以降、Blockbench\*\*、Minecraft リソースパックを使用すること。

\* このプラグインには、さらに依存関係がある場合があります。ドキュメントを確認してください。  
\*\* カスタムモデルの作成と編集に必要です。コンテンツを修正せずにインストールするだけであれば必要ありません。

# カスタムモデルの手動設定

注：このガイドでは、有効なカスタムモデルがすでに存在することを前提としています。これらは Blockbench
ファイル形式 (`.bbmodel`) で提供されます。

EliteMobs は、NPC とカスタムボスのカスタムモデルを使用できます。このプロセスはどちらも同じであり、次のとおりです。

## ステップ 1. EliteMobs 設定の設定

変更するカスタムボスまたは NPC の設定ファイルに移動し、次の行を追加します。

```yaml
customModel: modelname
```

`modelname`
をモデルの名前に置き換えます。名前は、使用しているカスタムモデルファイルの名前です。例として、テストボスのカスタムモデルファイルは `showcase_boss.bbmodel`
です。したがって、設定オプションは次のようになります。

```yaml
customModel: showcase_boss
```

これで EliteMobs の設定は完了です。ここから少し複雑になります。

## ステップ 2. Model Engine データの生成

[_注：不明な点や問題がある場合は、こちらで Model Engine の wiki
を参照してください。_](https://github.com/Ticxo/Model-Engine-Wiki/wiki/Importing-and-Exporting#importing)

1. カスタムモデル Blockbench ファイル (`.bbmodel`) をディレクトリ `(yourServer)/plugins/ModelEngine/blueprints` に配置します。
2. コマンド `/meg reload` を実行します。すべてが正しく動作すると、`[Model Engine] X models loaded`
   というメッセージが表示されます。ここで `x` は登録したモデルの数です。

## ステップ 3. リソースパックの生成

[**注：この手順を実行するための、よりシンプルで別の方法がこのリンクにあります。
**]($language$/elitemobs/custom_models.md&section=step-2.-generating-the-resource-pack) ただし、ここでリストされている方法よりも柔軟性は少し劣ります。

サーバーでダウンロードを管理する場合、おそらく最も難しい部分です。**自動的に配布する前に、クライアントのリソースパックでシステムが動作するかどうかを確認してください！
**

1. ディレクトリ `(yourServer)/plugins/ModelEngine/resource pack`
   に移動し、そのデータを使用してリソースパックを作成するか、そこに `assets` フォルダーをリソースパックの `assets` に追加します。
    1. 新しいリソースパックを作成する場合は、`resource pack` 内のファイルを zip
       ファイルに入れることができ、それが配布可能な有効なリソースパックになります。[詳細情報](https://github.com/Ticxo/Model-Engine-Wiki/wiki/Importing-and-Exporting#preexisting-resource-pack)。
    2.
    すでにリソースパックがある場合は、既存のモデルを誤って上書きしないようにしてください。[詳細情報](https://github.com/Ticxo/Model-Engine-Wiki/wiki/Importing-and-Exporting#preexisting-resource-pack)。
2. リソースパックをプレイヤーに配布します。**リソースパックを持っているプレイヤーのみがカスタムモデルを表示でき、他のすべてのプレイヤーには非常に奇妙で壊れたように表示されます
   **。これらを頻繁に使用する場合は、リソースパックの使用を強制することもできます。
    1. （オプション）プレイヤーがログイン時にリソースパックをダウンロードできるようにするには、ファイルをオンラインのどこかにホストし、server.properties
       の `resource-pack=` フィールドをそのアドレスを指すように変更する必要があります。\***
    2. （オプション）リソースパックを変更する場合は、`resource-pack-sha1=`
       オプションを使用して、サーバーがプレイヤーのリソースパックを更新する必要があるかどうかを確認できるようにします。この値を生成するには、リソースパックを [http://onlinemd5.com/](http://onlinemd5.com/)
       にアップロードし、SHA1
       オプションを選択してください。リソースパックを更新するたびにこれを行う必要があります。そうしないと、ユーザーは更新を受けられません。\***
    3. （オプション）プレイヤーにリソースパックの使用を強制するには、server.properties
       でオプション `require-resource-pack=true` を使用します。\***

**server.properties を変更した場合は、再起動する必要があります！**

\*** 注：これらの指示で問題が解決しない場合は、オンラインに役立つガイドがたくさんあります。

### リソースパックのマージ

リソースパックをマージする必要がある場合は、手動でマージできます。ただし、[merge.elmakers](https://merge.elmakers.com/)
などのオンラインツールを使用してリソースパックをマージすることをお勧めします。

## ステップ 4. うまくいくことを願う

すべてが正しく実行されたと仮定すると、ボスまたは NPC にカスタムモデルが表示されるはずです。次のコマンドを使用してそれらを生成できます。

* カスタムボス：`/em spawncustom filename.yml`
* NPC：`/em spawnnpc filename.yml`

その後、コマンド `/em remove` を使用して削除できます。

# EliteMobs のカスタムモデルの作成と適用

EliteMobs は、Model Engine によって有効と見なされるモデルを使用できます。これは、できないことがあまりないことを意味します。

ただし、アニメーションに関しては、ボスがアニメーションを使用できることを保証するために、アニメーションに特定の名前を使用する必要があります。

これらのアニメーション名は、Blockbench のアニメーションタブで設定されているものです。これらはいつでも名前を変更できるため、既存のモデルを
EliteMobs で動作するように改造できます。

## アニメーション

このシステムはまだ非常に新しいため、このセクションはまだ拡張中であることに注意してください。機能リクエストが届くにつれて、さらに追加される予定です。

### idle

`idle` は、戦闘中ではなく移動していないエンティティの正しいアニメーション名です。EliteMobs は、Model Engine が使用するデフォルトの
idle アニメーションシステムを変更しません。

### walk

`walk` は、移動しているエンティティの正しいアニメーション名です。EliteMobs は、Model Engine が使用するデフォルトの idle
アニメーションシステムを変更しません。

### attack

攻撃アニメーションには 3 つのタイプがあります。

#### attack

`attack` は、ボスが攻撃したときの正しい一般的なアニメーション名です。

#### attack_melee

`attack_melee` は、カスタムボスがバニラの Minecraft
近接攻撃を使用してエンティティを攻撃したときに実行される攻撃の正しいアニメーション名です。`attack`
をオーバーライドします。アニメーションはダメージを与えた**後**
に再生されることに注意してください。これは今のところ残念ながら制限事項です。そのため、アニメーションを非常に高速にしてください。

#### attack_ranged

`attack_ranged` は、カスタムボスが投射エンティティを生成したときに実行される攻撃の正しいアニメーション名です。`attack`
をオーバーライドします。アニメーションは投射体が発射された**後**
に再生されることに注意してください。これは今のところ残念ながら制限事項です。そのため、アニメーションを非常に高速にしてください。

### damaged

`damaged` は、カスタムボスがダメージを受けたときに再生するダメージアニメーションの正しいアニメーション名です。

### death

`death` は、死亡アニメーションの正しいアニメーション名です。EliteMobs は、Model Engine が使用するデフォルトの idle
アニメーションシステムを変更しません。

### powers

注：このセグメントはまだ開発中です。以下は、計画されている機能です。

EliteMobs
のすべてのパワーには、アニメーションを割り当てることができます。アニメーションは、パワーがトリガーされたときに常に開始され、パワーの使用中はそれ以上のトリガーは現在提供されていません。無敵状態など、トリガーがなく、ボスの受動的なプロパティにすぎないパワーは、何も実行しません。

パワーにアニメーションを割り当てるには、アニメーションの名前を elitemobs パワーファイルと同じにする必要があります。

例として、ゾンビネクロノミコンパワーにアニメーションを追加するには、アニメーションを `zombie_necronomicon.yml`
と呼ぶ必要があります。パワーがトリガーされるとすぐに再生を開始し、ループするように設定されていない場合はアニメーションが終了すると終了するか、パワーが完了したときに終了します。

# ダンジョンからのカスタムモデルのインポート

## ステップ 1. 通常のインポート

カスタムモデルを含むダンジョンパッケージャーの zip
フォルダーをインポートすると、カスタムモデルは自動的に `(yourServer)/plugins/ModelEngine/blueprints` に移動され、Model
Engine は関連するリソースパックと Model Engine ファイルを生成するために自動的にリロードされます。

## ステップ 2. リソースパックの生成

ファイルのインポートのために EliteMobs をリロードしているときにオンラインの場合、EliteMobs はチャットにメッセージを自動的に投稿し、クリックして
EliteMobs リソースパックを生成できます。または、コマンド `/em generateresourcepack` を実行して生成することもできます。

このコマンドを実行すると、すべてのリソースパックファイルが EliteMobs の `exports`
フォルダーに非破壊的な方法でコピーされます。これは、リソースパックフォルダーのリソースパック名 `elitemobs_resource_pack`
を使用して、リソースパックを exports フォルダーに解凍した場合、同じ名前のファイルが ModelEngine から取得されない限り、EliteMobs
はその中のファイルを削除しないことを意味します（pack.meta と pack.png を除く）。これにより、以前に入れたモデルを失うことなくリソースパックを更新できます。

最後に、EliteMobs は `exports` フォルダー内のリソースパックを zip 圧縮し、このファイルは配布の準備が整います。

この完了後、EliteMobs はリソースパックの SHA1 コードを更新することも提案します。

### ステップ 2.5. SHA1 の更新

`server.properties` ファイルの SHA1 コードは、クライアントにリソースパックが古いかどうかを知らせるために使用され、必要に応じて更新させます。このコードは、ステップ
2 の後に表示されるチャットのオプションをクリックするか、コマンド `/em updateresourcepack` を実行して、EliteMobs
を介して生成できます。

**これは、`exports` フォルダー内の zip 圧縮されたリソースパックの正しい SHA1 コードで server.properties
ファイルを更新することを覚えておいてください。** コマンドを実行した後に削除したり、zip 圧縮されたファイルを変更したりすると、機能しません。

## ステップ 3. ファイルを公開する

選択した場所にファイルをホストします。一部の人は Google Drive や Dropbox
をこれに使用しています。可能であれば、自分でこのファイルをホストすることをお勧めします。Minecraft
サーバーから直接ホストするのに役立つプラグインもいくつかあります。動作するそのようなプラグインを見つけた場合は、Discord で
MagmaGuy に知らせてください。この投稿がその情報で更新されます。
