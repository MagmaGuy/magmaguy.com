# 创建Boss阶段

Boss阶段是自定义Boss的子机制。这些阶段背后的系统如此灵活和强大，它需要自己的专门解释，以确保你能好好利用这个功能。

### Boss阶段如何工作？

在EliteMobs中，可以使用以下配置格式向任何自定义Boss添加Boss阶段：

```yaml
phases:
- phase_2_boss.yml:0.X
- phase_3_boss.yml:0.Y
```
_**注意：你最初生成的Boss，包含所有其他阶段信息的Boss，将被称为阶段1的Boss。它不应该在阶段条目中。**_

这个机制的基本目的是允许管理员在战斗中更改自定义Boss的属性。通过使用上面的配置格式，你可以在阶段之间完全更改配置文件，这意味着你可以更改99.99%的属性-比如能力、伤害倍增符、生命值倍增符、实体类型、伪装、穿的护甲......

为了实现这个功能，EliteMobs会在战斗中删除你的Boss，并立即以下一个阶段的版本替换它。这个过程是即时的，所以它往往非常无缝 - 除非你出于闲情逸致想让它花哨起来。

### 例子

以这个阶段Boss为例：

文件：phase_1_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- phase_2_boss.yml:0.60
- phase_3_boss.yml:0.30
```

文件：phase_2_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```
文件：phase_3_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

这构成了一个有效的阶段Boss。如果你生成phase_1_boss.yml，它会生成一个具有以上属性的游荡者（Stray）。当其损失到_60%_的生命值后，它将立即被在同一位置替换为依照phase_2_boss.yml文件设置的自定义Boss，因为配置文件中指定了`- phase_2_boss.yml:0.60` (_phase_2_boss.yml是该自定义Boss的文件名，0.60表示60%的生命值_)。_注意，阶段2的Boss会以60%的生命值出现，因为它在这个时候改变到该阶段。_ Boss将拥有在phase_2_boss.yml文件上列出的能力。当阶段2的Boss损失到30%的生命值时，它生成阶段3设置的Boss。注意，阶段3的能力与之前的无关 - 你可以在阶段之间完全改变能力，就像几乎所有其他属性一样。

## 高级

### 继承机制

下面是一些从阶段到阶段不会改变的事物的列表：

- 链中的第一个阶段Boss决定了Boss将经历哪些阶段，这意味着你不应该为阶段中的其他Boss设置阶段条目。

- 威胁表/伤害表保持不变，这意味着战利品分配和高级恶意攻击系统不会受到阶段变化的影响

- 阶段切换基于失去的%健康值，这从阶段到阶段保留。这意味着如果你的boss设定在50%的健康值时进入第2阶段，那么将出现来替代第1阶段boss的boss仍将处于50%的健康值。这也意味着每个阶段可以有完全不同的健康值，而不会引发问题。

- 如果阶段Boss通过默认的战斗结束Boss再生系统恢复到满健康，那么阶段Boss将恢复到第1阶段

- 也是区域Boss的阶段Boss在所有阶段中共享相同的牵引半径和超时机制，并将在重新计时结束后作为第1阶段的Boss重生。

#### 警告

以下是一些可能最初反直觉的工作方式的机制列表：

- 如果在任何阶段阶段Boss被杀死，它会掉落该阶段的战利品。这意味着如果有人设法快速杀死阶段boss（1击杀），这个boss将真的会死，并掉落为那个boss文件配置的战利品，这可能不一定是最后阶段的战利品。你可以通过设置所有的boss文件的战利品表来解决这个问题，或者确保你的阶段Boss有足够的HP，到无法在几次攻击中杀死他们。另外，你可以有特别的战利品表，供能跳过阶段的人使用。

- 由于阶段Boss实际上在战斗中生成了自定义Boss，所以他们在生成时会进行整个生成例程。因此，当谈到生成消息和生成时运行的命令时，请小心。另外，阶段boss在改变阶段时不会死，他们只是被其他东西替换。这意味着只有对最后的阶段Boss运行死亡命令，或者玩家设法通过造成足够的伤害跳过一个阶段。可以使用生成命令来插入阶段变化的命令。*Note: * 如果因阶段Boss被重新生成到满健康状态，那么第1阶段Boss的生成消息将不会再次发送。

- 阶段Boss可以来回载人，或者在阶段间停止载人。如果在坐骑死前阶段Boss被杀，坐骑将持续到下一阶段。如果boss恢复到满满的，坐骑被删除，boss变成不载人，除非它在阶段1配置载人实体。

- 由于在阶段之间生成新的自定义Boss，一次性生成机制在阶段之间和在全面恢复之间重置。

### 提示和技巧

- 你可以利用装备和实体类型可以在战斗中改变的事实，让boss在整个战斗中看起来越来越（或越来越少）危险

- 尽管可能，但除非有特定的设计目标，最好让阶段Boss具有的能力在阶段之间不要过于剧烈变化，因为玩家更可能享受在整个战斗中自然感觉的进展。

- 你可以在阶段之间运行命令来使用onSpawn命令

- 阶段可以用来将Boss从近战模式切换到远程模式，反之亦然。

- 阶段Boss被设计为具有大量HP的强硬boss。他们通常最适合作为地下城的最后boss对战，或者作为大型世界boss。

- 在设计遭遇战时，记住，可能无人会在阶段之间杀掉增援。

- Boss可以有你想要的任何阶段数量，但是他们拥有的阶段越多，他们需要的健康值就越多，以使每个阶段有意义


