# 创建 Boss 阶段


Boss 阶段是自定义 Boss 的一个子机制。这些阶段背后的系统非常灵活和强大，需要专门的解释才能确保您充分利用此功能。

### Boss 阶段如何运作？

可以使用以下配置格式将 Boss 阶段添加到 EliteMobs 中的任何自定义 Boss：

```yaml
phases:
- 阶段_2_Boss.yml:0.X
- 阶段_3_Boss.yml:0.Y
```

_**注意：您最初生成的包含所有其他阶段信息的 Boss 将被称为阶段 1 Boss。它不应包含在 phases 条目中。**_

此机制背后的基本目的是允许管理员在战斗期间更改自定义 Boss 属性。通过使用上面的配置格式，您可以在不同阶段之间完全更改配置文件，这意味着您可以更改 99.99% 的属性 - 例如力量、伤害倍增器、生命值倍增器、实体类型、伪装、穿着的盔甲...

为了实现这一点，EliteMobs 会在战斗期间删除您的 Boss，并立即将其替换为下一阶段的版本。此过程是即时的，因此往往非常无缝 - 除非您故意使其变得 flashy。

### 示例

以这个阶段 Boss 示例为例：

文件：阶段_1_Boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- 阶段_2_Boss.yml:0.60
- 阶段_3_Boss.yml:0.30
```

文件：阶段_2_Boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```

文件：阶段_3_Boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

这构成一个有效的阶段 Boss。如果您生成阶段_1_Boss.yml，它将生成一个具有上面列出的属性的流浪者。在受到伤害降低到其生命值的 _60%_ 后，它将立即被阶段_2_Boss.yml 中形成的自定义 Boss 替换在相同的位置，因为配置文件中声明 `- 阶段_2_Boss.yml:0.60`（_阶段_2_Boss.yml 是该自定义 Boss 的文件名，0.60 是 60% 的生命值_）。_请注意，阶段 2 Boss 将以其 60% 的生命值生成，因为这是它转变到该阶段的时间。_Boss 将拥有阶段_2_Boss.yml 文件中列出的力量。一旦阶段 2 Boss 的生命值降低到 30%，它就会生成设置为阶段 3 的 Boss。请注意，阶段 3 的力量与之前的无关 - 您可以完全更改阶段之间的力量，就像几乎所有其他属性一样。

## 高级

### 继承机制

以下是不会在不同阶段之间改变的事情：

- 链中的第一个阶段 Boss 决定了 Boss 将经历哪些阶段，这意味着您不应该为阶段中的其他 Boss 放置 phases 条目。

- 威胁表/伤害表保持不变，这意味着战利品分配和高级仇恨系统不受阶段变化的影响

- 切换阶段基于损失的生命值百分比，该百分比在不同阶段之间保持不变。这意味着如果您的 Boss 设置为在 50% 生命值时进入阶段 2，那么将出现替换阶段 1 Boss 的 Boss 仍将处于 50% 的生命值。这也意味着每个阶段可以具有完全不同的生命值，而不会造成问题。

- 如果阶段 Boss 通过默认的非战斗 Boss 再生系统恢复到满血，则它们将恢复到阶段 1。

- 同时也是区域 Boss 的阶段 Boss 在所有阶段共享相同的牵引绳半径和超时机制，并且将在重生计时器结束后作为阶段 1 Boss 重生。


#### 警告

以下是一些机制，它们的工作方式可能与直觉相反：

- 如果阶段 Boss 在任何阶段被杀死，它将掉落该阶段的战利品。这意味着如果有人设法过快地杀死一个阶段 Boss（一击必杀），它实际上会死亡并掉落为该 Boss 文件配置的战利品，这可能不一定是最终阶段。您可以通过将战利品表设置为该阶段 Boss 的所有 Boss 文件相同来解决此问题，或者确保您的阶段 Boss 拥有足够的 HP，使其无法在几次攻击中被杀死。或者，您可以为能够跳过阶段的玩家设置特殊的战利品表。

- 由于阶段 Boss 实际上会在战斗期间导致自定义 Boss 生成，因此它们会在生成时执行其整个生成例程。因此，在生成消息和生成时运行的命令方面要小心。此外，阶段 Boss 在改变阶段时不会死亡，它们只是被其他东西交换了。这意味着在死亡时运行的命令将仅对最后一个阶段 Boss 运行，或者如果玩家设法通过造成足够的伤害跳过阶段。可以在生成时运行的命令可用于连接到阶段更改。\*注意：\*如果由于阶段 Boss 恢复到满血而重生，则不会再次发送阶段 1 Boss 的生成消息。

- 阶段 Boss 可以在阶段之间骑乘或停止骑乘。如果阶段 Boss 在坐骑死亡之前被杀死，则坐骑将持续存在到下一阶段。如果 Boss 恢复到满血，则坐骑将被删除，并且 Boss 将停止骑乘，除非它被配置为在阶段 1 期间骑乘实体。

- 由于在不同阶段之间会生成新的自定义 Boss，因此一次性生成机制会在不同阶段之间以及满血时重置。


### 提示和技巧

- 您可以利用在战斗中可以更改装备和实体类型的事实，使 Boss 在整个战斗中看起来越来越危险（或越来越不危险）

- 虽然可能，但除非有特定的设计目标，否则最好是阶段 Boss 拥有的力量在不同阶段之间不要发生太大变化，因为玩家更有可能享受在整个战斗中感觉自然的进展。

- 您可以使用 onSpawn 命令在不同阶段之间运行命令

- 阶段可用于将 Boss 从近战模式切换到远程模式，反之亦然

- 阶段 Boss 被设计成具有大量 HP 的强力 Boss。它们通常最适合用作地下城的最终 Boss 遭遇战或大型世界 Boss。

- 在设计遭遇战时，请记住，增援可能不会在不同阶段之间被玩家杀死。

- Boss 可以拥有您想要的任意数量的阶段，但阶段越多，它们需要的生命值就越多，以使每个阶段都重要。



