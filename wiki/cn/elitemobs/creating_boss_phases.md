# 创建 Boss 阶段

Boss 阶段是自定义 Boss 的一个子机制。这些阶段背后的系统非常灵活和强大，以至于它需要自己专门的解释，以确保您能充分利用此功能。

### Boss 阶段如何工作？

可以使用以下配置格式将 Boss 阶段添加到 EliteMobs 中的任何自定义 Boss：

```yaml
phases:
- phase_2_boss.yml:0.X
- phase_3_boss.yml:0.Y
```

_**注意：您最初生成的包含所有其他阶段信息的 Boss 将被称为第 1 阶段 Boss。它不应包含在 phases 条目中。**_

此机制背后的基本意图是允许管理员在战斗期间更改自定义 Boss 的属性。通过使用上述配置格式，您可以完全更改每个阶段的配置文件，这意味着您可以更改
99.99% 的属性 - 例如力量、伤害倍率、生命值倍率、实体类型、伪装、穿着的盔甲...

为了实现这一点，EliteMobs 会在战斗期间删除您的 Boss，并立即将其替换为下一个阶段的版本。此过程是即时的，因此它往往非常无缝 -
除非您想故意使其变得花哨。

### 示例

以这个示例阶段 Boss 为例：

文件：phase_1_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- phase_2_boss.yml:0.60
- phase_3_boss.yml:0.30
```

文件：phase_2_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```

文件：phase_3_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

这构成了一个有效的阶段 Boss。如果您生成 phase_1_boss.yml，它将生成一个具有上述属性的流浪者。在被击伤至其生命值的 _60%_
后，它将立即在同一位置被 phase_2_boss.yml 中形成的自定义 Boss 所取代，因为配置文件声明了 `- phase_2_boss.yml:0.60`（
_phase_2_boss.yml 是该自定义 Boss 的文件名，0.60 是 60% 的生命值_）。_请注意，第 2 阶段 Boss 将以其生命值的 60%
生成，因为那时它会变为该阶段。_ 该 Boss 将具有 phase_2_boss.yml 文件中列出的力量。一旦第 2 阶段 Boss 被击伤至其生命值的
30%，它会生成为第 3 阶段设置的 Boss。请注意，第 3 阶段的力量与之前的力量无关 - 您可以完全更改阶段之间的力量，就像几乎所有其他属性一样。

## 高级

### 继承的机制

以下是阶段之间不会更改的事项列表：

- 链中的第一个阶段 Boss 决定 Boss 将经历哪些阶段，这意味着您不应为阶段中的其他 Boss 添加 phases 条目。

- 威胁表/伤害表保持不变，这意味着战利品分配和高级仇恨系统不受阶段变化的影响。

- 切换阶段基于损失的生命值百分比，该百分比在各个阶段之间保留。这意味着如果您的 Boss 设置为在 50% 生命值时进入第 2
  阶段，则将出现以取代第 1 阶段 Boss 的 Boss 仍将具有 50% 的生命值。这也意味着每个阶段都可以具有完全不同的生命值，而不会引起问题。

- 如果阶段 Boss 通过默认的战斗外 Boss 回复系统恢复到满血，则会恢复到第 1 阶段

- 同时也是区域 Boss 的阶段 Boss 在所有阶段共享相同的牵引半径和超时机制，并且会在回复计时器完成后作为第 1 阶段 Boss 重新生成。

#### 警告

以下是一些以可能最初违反直觉的方式工作的机制列表：

- 如果阶段 Boss 在任何阶段被杀死，它将掉落该阶段的战利品。这意味着如果有人设法太快杀死阶段 Boss（一击），它实际上会死亡并掉落为该
  Boss 文件配置的战利品，这可能不一定是最后阶段。您可以通过将所有阶段 Boss 文件的战利品表设置为相同，或者确保您的阶段 Boss
  拥有足够的 HP 以至于不可能在几次击打中杀死它们来解决此问题。或者，您可以为能够跳过阶段的人员设置特殊的战利品表。

- 由于阶段 Boss 实际上会在战斗期间生成自定义 Boss，因此它们会在生成时执行整个生成例程。因此，在生成时运行的生成消息和命令方面要小心。此外，阶段
  Boss 在更改阶段时不会死亡，它们只是与别的东西交换。这意味着在死亡时运行的命令仅会为最后一个阶段 Boss
  运行，或者如果玩家设法通过造成足够的伤害来跳过阶段。在生成时运行的命令可用于挂钩阶段更改。\ *注意：\* 如果阶段 Boss
  由于恢复到满血而重新生成，则不会为第 1 阶段 Boss 再次发送生成消息。

- 阶段 Boss 可以在各个阶段之间被安装或不再被安装。如果阶段 Boss 在坐骑死亡之前被杀死，则坐骑将持续到下一个阶段。如果 Boss
  回复到满血，则坐骑将被删除，并且 Boss 将不再被安装，除非它被配置为在第 1 阶段安装实体。

- 由于在各个阶段之间会生成新的自定义 Boss，因此 1 次生成机制会在各个阶段之间以及在完全回复时重置。

### 提示和技巧

- 您可以利用在整个战斗过程中可以更改装备和实体类型的事实，使 Boss 在整个战斗过程中看起来越来越危险（或越来越不危险）

- 虽然有可能，但除非有特定的设计目标，否则最好是阶段 Boss 所拥有的力量在各个阶段之间不要发生太大的变化，因为玩家更有可能在整个战斗过程中享受感觉自然的进展。

- 您可以使用 onSpawn 命令在各个阶段之间运行命令

- 阶段可用于将 Boss 从近战模式切换到远程模式，反之亦然

- 阶段 Boss 的构建是为了成为具有大量 HP 的强大 Boss。它们通常最适合作为地牢的最终 Boss 遭遇或作为大型世界 Boss。

- 在设计遭遇战时，请记住，增援部队可能不会被玩家在各个阶段之间杀死。

- Boss 可以拥有任意数量的阶段，但是它们拥有的阶段越多，它们就需要更多的生命值才能使每个阶段都发挥作用。
