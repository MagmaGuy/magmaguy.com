# 创建首领阶段

首领阶段是自定义首领的子机制。这些阶段背后的系统非常灵活和强大，以至于需要其自己的专用说明，以确保您充分利用此功能。

### 首领阶段如何工作？

可以使用以下配置格式将首领阶段添加到 EliteMobs 中的任何自定义首领：

```yaml
phases:
- phase_2_boss.yml:0.X
- phase_3_boss.yml:0.Y
```

_**注意：最初生成且包含所有其他阶段信息的首领将被称为第 1 阶段首领。它不应在阶段条目中。**_

此机制背后的基本意图是允许管理员在战斗中更改自定义首领属性。通过使用上面的配置格式，您可以完全更改阶段到阶段的配置文件，这意味着您可以更改 99.99% 的属性 - 例如能力、伤害乘数、生命值乘数、实体类型、伪装、穿着的盔甲...

为了实现这一点，EliteMobs 会在战斗中删除您的首领，并立即将其替换为来自下一阶段的版本。此过程是即时的，因此它往往非常无缝 - 除非您想故意使其华丽。

### 示例

以下是示例阶段首领：

文件：phase_1_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- phase_2_boss.yml:0.60
- phase_3_boss.yml:0.30
```

文件：phase_2_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```

文件：phase_3_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

这构成了一个有效的阶段首领。如果生成 phase_1_boss.yml，它将生成一个具有上述属性的流浪者。在受到伤害降至其生命值的 _60%_ 之后，它将立即在同一位置被 phase_2_boss.yml 中形成的自定义首领替换，因为配置文件声明 `- phase_2_boss.yml:0.60`（_phase_2_boss.yml 是该自定义首领的文件名，0.60 是生命值的 60%_）。_请注意，第 2 阶段首领的生成生命值将为其生命值的 60%，因为这是它更改为该阶段的时间。_首领将具有 phase_2_boss.yml 文件中列出的能力。一旦第 2 阶段首领的生命值降至 30%，它就会生成为第 3 阶段设置的首领。请注意，第 3 阶段的能力与以前的能力无关 - 您可以完全更改阶段之间的能力，就像几乎所有其他属性一样。

## 高级

### 继承机制

以下是在阶段之间不会更改的事项列表：

- 链中的第一个阶段首领决定首领将经历哪些阶段，这意味着您不应为阶段中的其他首领添加阶段条目。

- 威胁表/伤害表保持不变，这意味着战利品分配和高级仇恨系统不受阶段更改的影响

- 切换阶段基于损失的生命值百分比，该百分比在阶段之间保留。这意味着如果您的首领设置为在 50% 生命值时进入第 2 阶段，则将出现的替换第 1 阶段首领的首领仍将具有 50% 的生命值。这也意味着每个阶段可以具有完全不同的生命值而不会引起问题。

- 如果阶段首领通过默认的非战斗首领生命值回复系统恢复到满生命值，则会恢复到第 1 阶段

- 同样是区域首领的阶段首领在所有阶段中共享相同的束缚半径和超时机制，并且在重生计时器结束后将作为第 1 阶段首领重生。

#### 警告

以下是一些以最初可能违反直觉的方式工作的机制列表：

- 如果在任何阶段中杀死一个阶段首领，它将掉落该阶段的战利品。这意味着如果有人设法过快地杀死一个阶段首领（一击），它实际上会死亡并掉落为该首领文件配置的战利品，这可能不一定是最终阶段。您可以通过将此阶段首领的所有首领文件中的战利品表设置为相同，或者通过确保您的阶段首领具有足够的生命值，使其无法在几次命中中被杀死来解决此问题。或者，您可以为能够跳过阶段的人设置特殊的战利品表。

- 由于阶段首领实际上会导致自定义首领在战斗期间生成，因此它们在生成时将执行整个生成例程。因此，当涉及到生成消息和在生成时运行的命令时，请务必小心。此外，阶段首领在更改阶段时不会死亡，它们只是被交换成其他东西。这意味着在死亡时运行的命令只会针对最后一个阶段首领运行，或者如果玩家设法通过造成足够的伤害来跳过一个阶段。在生成时运行的命令可用于挂钩阶段更改。\*注意：\*如果第 1 阶段首领由于阶段首领恢复到满生命值而重生，则不会再次发送生成消息。

- 阶段首领可以在阶段之间坐骑或停止坐骑。如果在坐骑死亡之前杀死阶段首领，则坐骑将持续到下一阶段。如果首领恢复到满状态，则会删除坐骑，并且首领将变为未坐骑状态，除非它在第 1 阶段配置为坐骑实体。

- 由于新的自定义首领在阶段之间生成，因此 1 次生成机制会在阶段之间以及在完全治疗时重置。

### 提示和技巧

- 您可以使用在整个战斗过程中可以更改装备和实体类型这一事实，使首领在整个战斗过程中看起来越来越危险（或越来越不危险）

- 虽然有可能，但除非有特定的设计目标，否则最好是阶段首领的能力在阶段之间不会发生太大变化，因为玩家更有可能在整个战斗过程中享受感觉自然渐进的体验。

- 您可以使用 onSpawn 命令在阶段之间运行命令

- 阶段可用于将首领从近战模式切换为远程模式，反之亦然

- 阶段首领被设计成具有大量生命值的强大首领。它们通常最适合作为地牢的最终首领遭遇战或作为大型世界首领。

- 在设计遭遇战时，请记住，增援可能会在阶段之间不会被玩家杀死。

- 首领可以具有您想要的任意数量的阶段，但是它们拥有的阶段越多，它们就需要更多的生命值才能使每个阶段都具有意义。
