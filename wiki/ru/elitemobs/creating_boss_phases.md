# Создание Фаз Босса

Фaзы босса — это подмеханика Пользовательских Боссов. Система, лежащая в основе этих фаз, настолько гибкая и мощная, что требует отдельного объяснения, чтобы вы могли эффективно использовать эту функцию.

### Как работают Фазы Босса?

Фазы босса можно добавить к любому Пользовательскому Боссу в EliteMobs, используя следующий формат конфигурации:

```yaml
phases:
- phase_2_boss.yml:0.X
- phase_3_boss.yml:0.Y
```

_**Примечание: босс, которого вы изначально вызываете и который содержит информацию обо всех других фазах, будет называться боссом фазы 1. Он не должен находиться в записи о фазах.**_

Основная цель этой механики — позволить администраторам изменять атрибуты Пользовательских Боссов во время боя. Используя формат конфигурации выше, вы можете полностью менять файлы конфигурации от фазы к фазе, что означает, что вы можете изменить 99,99% атрибутов — таких как способности, множители урона, множители здоровья, тип сущности, маскировку, носимую броню...

Для этого EliteMobs удаляет вашего босса во время боя и мгновенно заменяет его версией из следующей фазы. Процесс за этим мгновенный, поэтому он, как правило, проходит очень гладко — если только вы не хотите сделать его эффектным специально.

### Пример

Возьмем пример фазового босса:

Файл: phase_1_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- phase_2_boss.yml:0.60
- phase_3_boss.yml:0.30
```

Файл: phase_2_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```

Файл: phase_3_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

Это является допустимым Фазовым Боссом. Если вы вызовете phase_1_boss.yml, появится Странник с перечисленными выше атрибутами. После получения урона до _60%_ своего здоровья, он немедленно будет заменен в том же месте Пользовательским Боссом, сформированным в phase_2_boss.yml, так как в файле конфигурации указано `- phase_2_boss.yml:0.60` (_phase_2_boss.yml — это имя файла для этого пользовательского босса, 0.60 — это 60% здоровья_). _Обратите внимание, что босс фазы 2 появится с 60% своего здоровья, так как именно тогда происходит переход к этой фазе._ Босс будет иметь способности, перечисленные в файле phase_2_boss.yml. Как только босс фазы 2 получит урон до 30% своего здоровья, он вызовет босса, установленного для фазы 3. Обратите внимание, что способности для фазы 3 не связаны с предыдущими — вы можете полностью менять способности между фазами, как и почти все другие атрибуты.

## Продвинутый уровень

### Наследуемые механики

Вот список вещей, которые не меняются от фазы к фазе:

- Первый Фазовый Босс в цепочке определяет, через какие фазы пройдет босс, а это означает, что вы не должны помещать запись о фазах для других боссов в фазе.

- Таблица угроз / Таблица урона остается прежней, а это означает, что на распределение добычи и продвинутую систему аггро не влияет изменение фазы.

- Переключение фаз основано на % потерянного здоровья, которое сохраняется от фазы к фазе. Это означает, что если ваш босс должен перейти ко 2-й фазе при 50% здоровья, босс, который появится на замену босса 1-й фазы, все еще будет иметь 50% здоровья. Это также означает, что каждая фаза может иметь совершенно разное количество здоровья без каких-либо проблем.

- Фазовые Боссы возвращаются к Фазе 1, если их здоровье восстановлено до полного значения с помощью стандартной системы регенерации босса вне боя.

- Фазовые Боссы, которые также являются Региональными Боссами, имеют общий радиус привязи и тайм-аут для всех фаз и будут возрождаться как босс 1-й фазы после завершения таймера возрождения.

#### Предупреждения

Вот список механик, которые работают таким образом, что поначалу могут показаться нелогичными:

- Если Фазовый Босс будет убит на любой фазе, он сбросит добычу с этой фазы. Это означает, что если кому-то удастся убить фазового босса слишком быстро (одним выстрелом), он на самом деле умрет и сбросит добычу, настроенную для этого файла босса, который не обязательно может быть последней фазой. Вы можете исправить это, установив одинаковую таблицу добычи для всех файлов боссов для этого фазового босса или убедившись, что у ваших Фазовых Боссов достаточно HP, чтобы их невозможно было убить всего за несколько ударов. В качестве альтернативы, вы можете иметь специальные таблицы добычи для людей, способных пропускать фазы.

- Поскольку Фазовые Боссы на самом деле вызывают появление Пользовательских Боссов во время боя, они будут выполнять всю свою процедуру появления при появлении. Поэтому будьте осторожны с сообщениями о появлении и командами, которые выполняются при появлении. Кроме того, фазовые боссы не умирают при смене фаз, они просто заменяются чем-то другим. Это означает, что команды, выполняемые при смерти, будут выполняться только для последнего Фазового Босса или если игроку удастся пропустить фазу, нанеся достаточно урона. Команды, которые выполняются при появлении, можно использовать для подключения к изменениям фаз. \*Примечание: \* сообщение о появлении не будет отправлено снова для босса 1-й фазы, если они возродятся из-за того, что фазовый босс был восстановлен до полного здоровья.

- Фазовые боссы могут появляться верхом или переставать быть верхом между фазами. Если фазовый босс убит до смерти маунта, маунт сохранится до следующей фазы. Если босс регенерируется до полного здоровья, маунт удаляется, и босс становится без маунта, если он не настроен на установку на сущность во время фазы 1.

- Поскольку между фазами появляются новые Пользовательские Боссы, механика однократного появления сбрасывается между фазами и при полном лечении.

### Советы и подсказки

- Вы можете использовать тот факт, что снаряжение и типы сущностей могут изменяться на протяжении всего боя, чтобы босс выглядел все более и более (или все менее и менее) опасным на протяжении всего боя.

- Хотя это и возможно, если только нет конкретной цели дизайна, вероятно, лучше, чтобы способности Фазового Босса не менялись слишком резко между фазами, поскольку игрокам, скорее всего, понравится прогрессия, которая кажется естественной на протяжении всего боя.

- Вы можете использовать команды onSpawn для выполнения команд между фазами.

- Фазы можно использовать для переключения босса из режима ближнего боя в режим дальнего боя и наоборот.

- Фазовые Боссы были созданы как сложные боссы с большим количеством HP. Обычно они лучше всего подходят в качестве финального босса для подземелий или в качестве больших Мировых Боссов.

- При разработке сражений помните, что возможно, что подкрепления не будут убиты игроками между фазами.

- У боссов может быть любое количество фаз, но чем больше фаз, тем больше здоровья им понадобится, чтобы каждая фаза имела значение.
