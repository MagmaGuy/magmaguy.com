Вот перевод текста на русский язык с сохранением форматирования markdown:

# Создание Фаз Боссов

Фазы Боссов — это подмеханика Пользовательских Боссов (Custom Bosses). Система, лежащая в основе этих фаз, настолько гибкая и мощная, что требует отдельного подробного объяснения, чтобы вы могли эффективно использовать эту функцию.

### Как работают Фазы Боссов?

Фазы Боссов можно добавить любому Пользовательскому Боссу в EliteMobs, используя следующий формат конфигурации:

```yaml
phases:
- phase_2_boss.yml:0.X
- phase_3_boss.yml:0.Y
```

_**Примечание: босс, которого вы изначально призываете и который содержит информацию обо всех других фазах, будет называться боссом фазы 1. Он не должен быть включен в список phases.**_

Основная цель этой механики — позволить администраторам изменять атрибуты Пользовательского Босса во время боя. Используя приведенный выше формат конфигурации, вы можете полностью менять файлы конфигурации от фазы к фазе, что означает, что вы можете изменить 99.99% атрибутов — таких как способности (powers), множители урона (damage multipliers), множители здоровья (health multipliers), тип сущности (entity type), маскировка (disguise), надетая броня (armor worn)...

Для достижения этого EliteMobs удаляет вашего босса во время боя и мгновенно заменяет его версией из следующей фазы. Этот процесс происходит мгновенно, поэтому он обычно незаметен — если только вы не хотите сделать его намеренно эффектным.

### Пример

Рассмотрим пример босса с фазами:

Файл: phase_1_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: STRAY
powers:
- attack_gravity.yml
phases:
- phase_2_boss.yml:0.60
- phase_3_boss.yml:0.30
```

Файл: phase_2_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: SKELETON
powers:
- attack_gravity.yml
- arrow_fireworks.yml
```

Файл: phase_3_boss.yml

```yaml
isEnabled: true
level: 50
healthMultiplier: 10
entityType: WITHER_SKELETON
powers:
- arrow_rain
```

Это представляет собой действительного Босса с Фазами. Если вы призовете phase_1_boss.yml, появится Бродяга (Stray) с указанными выше атрибутами. После того как его здоровье снизится до _60%_, он немедленно будет заменен на том же месте Пользовательским Боссом, сформированным в phase_2_boss.yml, поскольку файл конфигурации указывает `- phase_2_boss.yml:0.60` (_phase_2_boss.yml — это имя файла для этого пользовательского босса, 0.60 — это 60% здоровья_). _Обратите внимание, что босс фазы 2 появится с 60% своего здоровья, так как именно при этом значении происходит переход к этой фазе._ У босса будут способности, перечисленные в файле phase_2_boss.yml. Как только здоровье босса фазы 2 снизится до 30%, появится босс, настроенный для фазы 3. Обратите внимание, что способности для фазы 3 не связаны с предыдущими — вы можете полностью менять способности между фазами, как и почти все остальные атрибуты.

## Продвинутые возможности

### Наследуемые механики

Вот список вещей, которые не меняются от фазы к фазе:

- Первая Фаза Босса в цепочке определяет, через какие фазы пройдет босс, что означает, что вам не следует добавлять запись phases для других боссов в фазе.

- Таблица угроз (Threat table) / Таблица урона (Damage table) остаются прежними, что означает, что распределение добычи (loot distribution) и продвинутая система агрессии (advanced aggro system) не затрагиваются сменой фазы.

- Переключение фаз основано на проценте потерянного здоровья, который сохраняется от фазы к фазе. Это означает, что если ваш босс настроен на переход в фазу 2 при 50% здоровья, босс, который появится на замену боссу фазы 1, также будет иметь 50% здоровья. Это также означает, что каждая фаза может иметь совершенно разное количество здоровья без возникновения проблем.

- Боссы с Фазами возвращаются к Фазе 1, если их здоровье полностью восстанавливается с помощью стандартной системы регенерации боссов вне боя.

- Боссы с Фазами, которые также являются Региональными Боссами (Regional Bosses), имеют одинаковый радиус привязки (leash radius) и механику тайм-аута (timeout mechanic) на всех фазах и будут возрождаться как босс фазы 1 после завершения таймера возрождения.

#### Предупреждения

Вот список механик, которые работают таким образом, что поначалу могут показаться нелогичными:

- Если Босс с Фазами погибает во время любой фазы, он сбрасывает добычу, настроенную для этой фазы. Это означает, что если кто-то сумеет убить босса с фазами слишком быстро (с одного удара), он действительно умрет и сбросит добычу, настроенную для файла этого босса, которая не обязательно может быть добычей финальной фазы. Вы можете исправить это, установив одинаковую таблицу добычи (loot table) для всех файлов боссов в этой цепочке фаз, или убедившись, что у ваших Боссов с Фазами достаточно здоровья, чтобы их было невозможно убить всего за несколько ударов. В качестве альтернативы, вы можете настроить специальные таблицы добычи для игроков, способных пропускать фазы.

- Поскольку Боссы с Фазами фактически вызывают появление Пользовательских Боссов во время боя, они выполняют всю свою процедуру появления при каждом появлении. Поэтому будьте осторожны с сообщениями о появлении (spawn messages) и командами, которые выполняются при появлении (commands that run on spawn). Кроме того, боссы с фазами не умирают при смене фазы, они просто заменяются чем-то другим. Это означает, что команды, выполняющиеся при смерти (commands that run on death), будут выполняться только для последнего Босса с Фазами, или если игроку удастся пропустить фазу, нанеся достаточно урона. Команды, выполняющиеся при появлении (commands that run on spawn), могут быть использованы для привязки к смене фаз. \*Примечание:\* сообщение о появлении не будет отправлено повторно для босса фазы 1, если он возродится из-за полного восстановления здоровья босса с фазами.

- Боссы с Фазами могут появляться верхом или переставать быть верхом между фазами. Если босс с фазами убит до того, как убито его ездовое животное (mount), животное сохранится и перейдет в следующую фазу. Если здоровье босса полностью восстанавливается, ездовое животное удаляется, и босс перестает быть верхом, если только он не настроен на езду на сущности во время фазы 1.

- Поскольку между фазами появляются новые Пользовательские Боссы, механика однократного появления (1-time spawn mechanic) сбрасывается между фазами и при полном восстановлении здоровья.

### Советы и хитрости

- Вы можете использовать тот факт, что снаряжение и типы сущностей могут меняться на протяжении боя, чтобы босс выглядел все более (или менее) опасным по ходу сражения.

- Хотя это возможно, если нет конкретной дизайнерской цели, вероятно, лучше, чтобы способности (powers) Босса с Фазами не менялись слишком кардинально между фазами, так как игрокам, скорее всего, понравится прогрессия, которая ощущается естественной на протяжении всего боя.

- Вы можете использовать команды onSpawn для выполнения команд между фазами.

- Фазы могут быть использованы для переключения босса из режима ближнего боя в режим дальнего боя и наоборот.

- Боссы с Фазами были созданы как сильные боссы с большим количеством здоровья. Обычно они лучше всего подходят в качестве финального босса для подземелий (dungeons) или как большие Мировые Боссы (World Bosses).

- При разработке столкновений имейте в виду, что подкрепления (reinforcements) могут не быть убиты игроками между фазами.

- Боссы могут иметь любое количество фаз, но чем больше у них фаз, тем больше здоровья им потребуется, чтобы каждая фаза имела значение.