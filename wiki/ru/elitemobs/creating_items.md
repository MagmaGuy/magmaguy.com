[![webapp_banner.jpg](../../../img/wiki/webapp_banner.jpg)](https://magmaguy.com/webapp/webapp.html)

# Создание пользовательских предметов

## Что такое пользовательские предметы?

Пользовательские предметы - это предметы, определяемые EliteMobs через файлы конфигурации. Вы можете настроить несколько аспектов этих предметов, таких как уровень предмета, зачарования, имя, описание, текстуру и многое другое!

## Веб-приложение

Вы можете легко и быстро создать пользовательский лут [здесь](https://magmaguy.com/webapp/webapp.html)!

## Прежде чем начать

### Где хранятся пользовательские предметы?

Файлы пользовательских предметов находятся в папке конфигурации `~/plugins/EliteMobs/customitems`.

Можно создавать подпапки, например `~/plugins/EliteMobs/customitems/myitems`. Это рекомендуется для поддержания порядка.

Файлы хранятся в формате `.yml`, а [Notepad++](https://notepad-plus-plus.org/) является рекомендуемым программным обеспечением для редактирования файлов конфигурации. Один файл определяет одного босса, хотя одного и того же босса можно возрождать несколько раз и даже устанавливать несколько мест возрождения для одного и того же файла босса.

Можно использовать [веб-приложение](https://magmaguy.com/webapp/webapp.html) для быстрого и легкого создания пользовательских боссов и многого другого.

<div align="center">

### Минимальная конфигурация

**Обратите внимание, что минимальный файл конфигурации для пользовательского предмета:**

```yml
```

Обратите внимание, что это просто пустой файл. По умолчанию будет использоваться деревянный меч с названием "Default name". **Все на этой странице является необязательным!**

### Пример предмета

Давайте посмотрим на пример того, как выглядит файл предмета.

<details> 
<summary><b>Пример</b></summary>

<div align="left">

```yml
isEnabled: true
material: WOODEN_AXE
name: '&4Тестовый предмет'
lore:
- Это классный предмет
- У него крутое описание
enchantments:
- DAMAGE_ALL,4
- FLAMETHROWER,1
potionEffects:
- FAST_DIGGING,0,self,onHit
- POISON,0,target,onHit
- GLOWING,0,self,continuous
dropWeight: dynamic
scalability: scalable
itemType: custom
```

</div>

</details>

</div>

## Настройки пользовательских предметов

Ниже приведен список всего, что можно настроить для пользовательских предметов:

<div align="center">

***

### isEnabled

Устанавливает, включен ли предмет. Не влияет на уже созданные предметы.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `isEnabled` | `true` / `false` | `true` |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
isEnabled: true
```

</div>

</details>

***

### material

Устанавливает материал предмета.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `material` | [Выберите из этого списка!](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/Material.html) | `WOODEN_SWORD` |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
material: DIAMOND_SWORD
```

</div>

</details>

***

### level

Устанавливает уровень предмета.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `level` | [Целое число](#integer) | `0` |

Обратите внимание, что этот параметр не имеет значения, если вы установите [`scalability`](#scalability) предмета в значение `scalable`. Если вы установите его в значение `limited`, это будет максимально возможный уровень предмета.

Кроме того, материалы имеют минимальный уровень. Железные материалы имеют уровень 6, алмазные материалы имеют уровень 7. Вы не можете принудительно установить уровень предметов ниже уровня материала.

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
level: 100
```

</div>

</details>

***

### name

Устанавливает отображаемое имя предмета.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `material` | [Строка](#string) с [цветовыми кодами](#color-codes) | "Default name" |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
name: "&2Классный предмет"
```

<div align="center">

![create_item_name.jpg](../../../img/wiki/create_item_name.jpg)

</div>

</div>

</details>

***

### lore

Устанавливает описание предмета.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `lore` | [Список](#list) с [цветовыми кодами](#color-codes) | нет |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
lore:
- "&2Это самый крутой меч"
- "&2всех времен!"
```

<div align="center">

![create_item_lore.jpg](../../../img/wiki/create_item_lore.jpg)

</div>

</div>

</details>

***

### enchantments

Устанавливает зачарования на предмете.

| Ключ |                                                                                                       Значения                                                                                                        | По умолчанию |
|---|:-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|-|
| `enchantments` | [Список](#list) с [зачарованиями Minecraft](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/enchantments/Enchantment.html) или [пользовательскими зачарованиями EliteMobs]($language$/elitemobs/custom_enchantments_list.md) | нет |

Обратите внимание, что эти записи следуют формату `enchantmentName:enchantmentLevel`. Проверьте пример ниже!

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
enchantments: 
- "DAMAGE_UNDEAD,8"
- "DURABILITY,4"
- "DAMAGE_ALL,7"
- "LOUD_STRIKES,3"
```

<div align="center">

![create_item_enchantments.jpg](../../../img/wiki/create_item_enchantments.jpg)

</div>

</div>

</details>

Также обратите внимание, что такие зачарования, как острота, по умолчанию становятся элитной остротой, если уровень начинает выходить за рамки ограничений ванильного Minecraft.

***

### potionEffects

Устанавливает эффекты зелий, которые будут у предмета. Они могут применяться к игроку или к сущности, поврежденной игроком.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `potionEffects` | [Список](#list) с [эффектами зелий Minecraft](https://hub.spigotmc.org/javadocs/spigot/org/bukkit/potion/PotionEffectType.html)| нет |

Кроме того, эффекты зелий используют определенный формат, который позволяет администраторам выбирать, кто и когда будет подвергаться воздействию:

| Настройка | Описание | Значения | По умолчанию |
|---|---|---|---|
| Уровень эффекта зелья | Устанавливает уровень эффекта зелья. **Эффекты зелий начинаются с уровня 0**! | [Целое число](#integer) | нет |
| Пострадавшая сущность | Устанавливает, кто подвергается воздействию эффекта зелья. | `self` (игрок) / `target` (сущность, которая получает удар) | нет |
| Метод применения | Устанавливает, когда применяется эффект зелья. | `onHit` / `continuous` (постоянно применяется) | нет |

Формат эффектов зелий: `potionEffectName,potionEffectLevel,affectedEntity,applicationMethod`. Проверьте пример ниже!

EliteMobs также включает в себя пользовательские предметы, которые функционируют как амулеты. Эти предметы ничего не делают, кроме как предоставляют эффекты зелий игроку, когда предмет находится в руках или экипирован в слот.

ПРЕДУПРЕЖДЕНИЕ: Использование эффекта зелья INSTANT_DAMAGE будет лечить нежить при ударе, так как это механизм по умолчанию в ванильном Minecraft.

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
potionEffects: 
- "POISON,0,target,onHit"
- "HEAL,1,self,onHit"
- "NIGHT_VISION,0,self,continuous"
```

<div align="center">

![create_item_potion_effects.jpg](../../../img/wiki/create_item_potion_effects.jpg)

</div>

</div>

С этим набором эффектов зелий произойдет следующее:

При попадании эффект зелья яда (уровень 1) будет применен к сущности, получившей удар от игрока. Кроме того, на игрока будет воздействовать эффект мгновенного лечения зельем 2-го уровня.

Непрерывно игроку будет дано ночное зрение. Это означает, что у игрока будет ночное зрение, пока он носит или держит предмет.

</details>

***

### scalability

Устанавливает, как уровень предмета растет с уровнем босса, который его выбрасывает.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `scalability` | `fixed`, `limited` или `scalable`. Проверьте ниже! | scalable |

Ознакомьтесь с этим списком, чтобы понять, что делают разные варианты!

| Настройка | Описание |
|---|---|
| `fixed` | Уровень предмета всегда будет равен уровню, установленному в файле конфигурации. |
| `limited` | Максимальный уровень предмета будет ограничен уровнем, установленным в файле конфигурации, или уровнем босса, в зависимости от того, что ниже. |
| `scalable` | Уровень предмета будет полностью основан на уровне босса, который его выбрасывает. |

Обратите внимание, что предметы с `dropWeight` всегда будут иметь масштабируемость `fixed`.

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
scalability: "scalable"
```

</div>

</details>

***

### itemType

Устанавливает, где вы можете получить предмет.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `itemType` | `custom` или `unique`. Проверьте ниже! | `custom` |

Есть два типа предметов:

| Настройка | Описание |
|---|---|
| `custom` | Предмет сможет выпасть с любого моба EliteMobs, способного выбрасывать добычу, и будет находиться в пользовательском магазине. |
| `unique` | Предмет не будет выпадать ни с одного босса и не будет находиться в пользовательском магазине. Единственный способ получить его - настроить пользовательского босса так, чтобы он выбрасывал его через свой `uniqueLootTable`! |

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
itemType: "unique"
```

</div>

</details>

***

### dropWeight

Устанавливает таблицу добычи, в которую будет входить предмет.

| Ключ |                  Значения                  | По умолчанию |
|---|:----------------------------------------:|-|
| `dropWeight` | `dynamic` или [значение типа Double](#double). | `dynamic` |

У EliteMobs есть 5 различных таблиц добычи для пользовательских предметов, исключая те, которые настроены напрямую, например `uniqueLootList` у пользовательских боссов.

Они следующие:

| Таблица добычи | Описание | Вес по умолчанию |
|---|---|---|
| Процедурно сгенерированные предметы | Предметы, которые генерируются случайным образом на основе файлов конфигурации сервера | `90.0` |
| Взвешенные предметы | Предметы, которые имеют вес, отличный от `dynamic` | `1.0` |
| Предметы с фиксированной масштабируемостью | Предметы с фиксированной масштабируемостью | `10.0` |
| Предметы с ограниченной масштабируемостью | Предметы с ограниченной масштабируемостью | `3.0` |
| Масштабируемые предметы | Предметы, которые масштабируются | `6.0` |

Когда босс умирает, один предмет из этих таблиц выбирается на основе файла конфигурации ItemSettings.yml. Значения по умолчанию для весов указаны выше в `Вес по умолчанию`. Чем выше вес, тем больше вероятность выпадения предмета.

`Взвешенные предметы` имеют небольшой `Вес по умолчанию`, что означает, что они не будут выпадать очень часто. Предметы с `dropWeight`, отличным от `dynamic`, предназначены для того, чтобы быть редкими и используются только по умолчанию для амулетов, которые выбрасывают боссы - предметы, используемые не для прямого боя, а для усиления игроков эффектами зелий.

`dropWeight`, который вы здесь устанавливаете, определяет шанс выпадения определенного `Взвешенного предмета` из списка `Взвешенных предметов`. Это не увеличивает шанс выпадения `Взвешенного предмета` вообще.

**Если вы запутались и просто хотите делать оружие и броню, пропустите этот параметр, так как он по умолчанию правильно установлен как `dynamic`.**

`Взвешенные предметы` обычно имеют вес 1.0.

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
dropWeight: "dynamic"
```

</div>

</details>

***

### customModelID

Устанавливает текстуру предмета. Требуется использование действительной текстуры из ресурспака!

| Ключ | Значения | По умолчанию |
|---|---|---|
| `customModelID` | [Целое число](#integer) | нет |

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
material: DIAMOND_SWORD
customModelID: 1
```

</div>

Это будет использовать пользовательскую текстуру 1 алмазных мечей из ресурспака, который использует игрок. Рекомендуется настроить свой сервер на выдачу игрокам ресурспаков при входе в систему, если вы хотите правильно использовать эту функцию.

</details>

***

### customModelV2

Начиная с версии Minecraft 1.21.4 (EM 9.1.13), это новая обязательная настройка для настройки пользовательских идентификаторов моделей предметов.
Устанавливает текстуру предмета. Требуется использование действительной текстуры из ресурспака!

| Ключ | Значения | По умолчанию |
|---|---|---|
| `customModelV2` | [Строка](#string) | нет |

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
customModelV2: elitemobs:equipment/magmaguys_toothpick
```

Эта настройка назначает определенную текстуру предмету. Вот как это работает:

- `elitemobs:` - это основной каталог в папке `assets` ресурспака.
- `equipment` - это подкаталог внутри `assets/elitemobs/models`.
- `magmaguys_toothpick` - это файл модели, расположенный в `assets/elitemobs/models/equipment` в ресурспаке.

Полный путь к файлу модели в этом примере будет:
`\.minecraft\resourcepacks\elitemobs_resource_pack\assets\elitemobs\models\equipment\magmaguys_toothpick.json`

</div>

Это будет использовать пользовательскую текстуру `magmaguys_toothpick` из ресурспака EliteMobs, который использует игрок. Рекомендуется настроить свой сервер на выдачу игрокам ресурспаков при входе в систему, если вы хотите правильно использовать эту функцию.

</details>

***

### permission

Устанавливает разрешение, необходимое для получения предмета.

| Ключ | Значения | По умолчанию |
|---|---|---|
| `permission` | [Строка](#string) | нет |

Вам понадобится плагин управления разрешениями, чтобы предоставить игрокам разрешения. Это будет работать правильно, только если вы не отключили зачарование привязки к душе.

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
permission: "elitemobs.cool.permission"
```

</div>

При такой настройке только игроки с разрешением `elitemobs.cool.permission` смогут получить этот предмет.

</details>

***

### soulbound

Устанавливает, должен ли предмет быть привязан к душе при выпадении.

| Ключ |       Значения        | По умолчанию |
|---|:-------------------:|---------|
| `soulbound` | [Логическое значение](#boolean) | `true`  |

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yml
soulbound: true
```

</div>

</details>


</div>
