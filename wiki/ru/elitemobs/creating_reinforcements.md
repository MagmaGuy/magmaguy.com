# Создание пользовательских подкреплений

Если вам интересно призывать элиту во время боя для усиления босса, это руководство подробно описывает этот процесс.

## Шаги для создания пользовательского босса:

1. Создайте своего основного пользовательского босса, который будет призывать вашего пользовательского босса.
2. Создайте пользовательского босса для подкреплений. Имейте в виду, что пользовательские боссы могут быть сильнее обычных мобов, но они также могут быть слабее.
3. Добавьте правильную строку подкрепления в файл конфигурации.

## Создание строки подкрепления

Предположим, у вас есть пользовательский босс со следующим форматом:

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eХранитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
```

И вы хотите добавить к нему подкрепления. Вот как может выглядеть одно из таких подкреплений:

```yaml
- summonType:ON_COMBAT_ENTER
  filename: binder_of_worlds_phase_1_parkour_reinforcement.yml
```

Чтобы сделать его действительным, добавьте его в список powers:

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eХранитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
- summonType: ON_COMBAT_ENTER
  filename: binder_of_worlds_phase_1_parkour_reinforcement.yml
```

Теперь подкрепление добавлено к сущности босса. Однако, как вы видите, здесь есть несколько опций, которые можно
настроить. Давайте рассмотрим их.

## Все опции пользовательского подкрепления

*Совет: Вы также можете использовать EliteScript для призыва подкреплений, подробнее об
этом [здесь]($language$/elitemobs/elitescript_actions.md&section=summon_reinforcement).*

<div align="center">

### summonType

Это обязательное поле. Оно определяет, когда должно появляться подкрепление.

| Ключ         |    Значения     | По умолчанию |
|--------------|:---------------:|:------------:|
| `summonType` | Специальные [1] |   `ON_HIT`   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
summonType: ON_HIT
```

</div>

</details>

#### Специальные [1]

| Ключ                            | Описание                                                                                                                                                                                                              |
|---------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `ONCE`                          | Появляется подкрепление один раз, при первом ударе босса. (может зависеть от % вероятности)                                                                                                                           |
| `ON_HIT`                        | Появляется подкрепление каждый раз, когда босса ударяют (может зависеть от % вероятности)                                                                                                                             |
| `ON_COMBAT_ENTER`               | Появляется подкрепление, когда босс вступает в бой (1)                                                                                                                                                                |
| `ON_COMBAT_ENTER_PLACE_CRYSTAL` | Специально: это для установки кристаллов края для битв с драконом, когда босс вступает в бой (1)                                                                                                                      |
| `GLOBAL`                        | Появляются подкрепления для каждого игрока в том же мире, что и босс. Подкрепления будут появляться рядом с игроками, независимо от того, как далеко они находятся от босса. Для работы требуется поле `customSpawn`! |

_(1) Боссы вступают в бой, когда их ударяют игроки или когда они обнаруживают игрока в радиусе действия._

***

### filename

Это обязательное поле, поскольку оно определяет, какое подкрепление должно появиться. Единственным исключением, когда
это поле не является обязательным, является использование параметра `summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`,
поскольку кристаллы края не являются элитами.

| Ключ    |        Значения         | По умолчанию |
|--------|:---------------------:|:-------:|
| `filename` | [Имя файла](#filename) |  нет   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
filename: test_boss.yml
```

</div>

</details>

</div>

***

**Минимальная жизнеспособность**

`summonType: SUMMON_TYPE` и `filename: filename.yml` достаточно сами по себе, чтобы создать пользовательское подкрепление. Следующий пример демонстрирует это.

<div align="center">

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eХранитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
- summonType: ON_COMBAT_ENTER
  filename: binder_of_worlds_phase_1_parkour_reinforcement.yml
```

*Однако, если вам нужно что-то более сложное, продолжайте читать ниже, чтобы узнать, что еще можно сделать с этими параметрами.*

</div>

</details>

</div>

<div align="center">

***

### chance

Это необязательное поле конфигурации, созданное для дополнения параметров `summonType` `ONCE` и `ON_HIT`. Оно
представляет вероятность появления пользовательского подкрепления при ударе босса.

| Ключ     |      Значения      | По умолчанию |
|----------|:------------------:|:------------:|
| `chance` | [Двойное](#double) |     нет      |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
chance: 0.5
```

*Представляет 50% вероятность появления пользовательского подкрепления.*

</div>

</details>

***

### location

`location: x,y,z` — это необязательное поле конфигурации, которое позволяет администраторам смещать местоположение
подкрепления на несколько блоков. Вот ключевые концепции, которые вам нужно знать об этой опции:

**Смещение местоположения является относительным.** Это означает, что `location: 0,10,0` породит босса ровно на 10
блоков выше босса, а не в мировых координатах 0,10,0.

**Относительное местоположение отличается для региональных боссов.** Региональные боссы всегда будут использовать свою
точку появления в качестве начала для относительного местоположения, это означает, что если вы знаете, где находится
точка появления босса, и подсчитаете блоки, вы можете заставить боссов подкрепления появляться в определенных местах.
Логово Хранителя Миров полагается на это, чтобы порождать боссов-башен испытаний в крайне определенных позициях блоков,
независимо от того, где находится босс-дракон.

**Боссы будут появляться внутри блоков, если вы ошибетесь в измерении расстояний.**

| Ключ    |      Значения       | По умолчанию |
|--------|:-----------------:|:-------:|
| `location` | [Строка](#string) |  нет   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
location: 0,10,0
```

*Для не регионального пользовательского босса подкрепление появится ровно на 10 блоков выше босса, независимо от того,
где он может быть.*

*Для регионального пользовательского босса подкрепление появится ровно на 10 блоков выше точки появления регионального
босса, независимо от того, где находится босс.*

</div>

</details>

_**Важное примечание: это обязательное поле для `summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`!**_

***

### lightningRod

Это специальный параметр, полезный только для `summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`. Он дает кристаллам края
возможность поражать пол вокруг себя с задержкой.

Он не может быть использован с другими пользовательскими подкреплениями, поскольку они должны полагаться на способности
для таких действий.

| Ключ           |        Значения        | По умолчанию |
|----------------|:----------------------:|:------------:|
| `lightningRod` | [Логическое](#boolean) |   `false`    |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
lightningRod: false
```

</div>

</details>

***

### inheritAggro

Это необязательное поле конфигурации, которое заставляет пользовательские подкрепления наследовать уровни угрозы босса.

Это особенно полезно, когда вы хотите, чтобы появляющиеся подкрепления атаковали человека, наносящего наибольшее
количество урона.

| Ключ           |        Значения        | По умолчанию |
|----------------|:----------------------:|:------------:|
| `inheritAggro` | [Логическое](#boolean) |   `false`    |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
inheritAggro: false
```

</div>

</details>

***

### amount

Это необязательное поле конфигурации, которое устанавливает количество появляющихся подкреплений.

| Ключ    |       Значения        | По умолчанию |
|--------|:-------------------:|:-------:|
| `amount` | [Целое число](#integer) |   `1`   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
amount: 1
```

</div>

</details>

***

### spawnNearby

Это необязательное поле конфигурации, которое определяет, должно ли пользовательское подкрепление появляться поблизости,
а не поверх босса или в определенном относительном местоположении.

Этот метод должен правильно учитывать вариации местности и не порождать боссов внутри стен, хотя в некоторых случаях это
может привести к тому, что они появятся за стенами, если зона боя слишком мала. Имеет радиус ~30 блоков.

| Ключ          |        Значения        | По умолчанию |
|---------------|:----------------------:|:------------:|
| `spawnNearby` | [Логическое](#boolean) |   `false`    |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
spawnNearby: false
```

</div>

</details>

***

### inheritLevel

Это необязательное поле конфигурации, которое определяет, должно ли пользовательское подкрепление наследовать уровень
пользовательского босса, которого оно усиливает.

| Ключ           |        Значения        | По умолчанию |
|----------------|:----------------------:|:------------:|
| `inheritLevel` | [Логическое](#boolean) |   `false`    |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
inheritLevel: false
```

</div>

</details>

***

### customSpawn

Это поле конфигурации, которое используется только для глобальных подкреплений. Оно использует пользовательские
параметры спавна, чтобы установить, где подкрепления смогут появляться.

Это можно использовать для того, чтобы подкрепления могли появляться на поверхности, в местах с освещением, в
определенных биомах и так далее. Подробнее см. на вики-странице
о [Пользовательских точках появления]($language$/elitemobs/creating_spawns.md).

| Ключ    |        Значения         | По умолчанию |
|--------|:---------------------:|:-------:|
| `customSpawn` | [Имя файла](#filename) |  нет   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
customSpawn: normal_surface_spawn.yml
```

</div>

</details>

</div>

## Сборка большого подкрепления

Давайте создадим пример подкрепления, используя большинство предыдущих полей:

```yaml
- summonType: ON_COMBAT_ENTER
  filename: test_boss.yml
  spawnNearby: true
  inheritAggro: true
  inheritLevel: true
```

Это делает следующее:

- Создает пользовательское подкрепление.
- Пользовательское подкрепление будет появляться, когда пользовательский босс вступает в
  бой (`summonType: ON_COMBAT_ENTER`).
- Вызываемым пользовательским подкреплением будет то, которое указано в `test_boss.yml` (`filename: test_boss.yml`).
- Пользовательское подкрепление появится в пределах 30 блоков от текущего местоположения пользовательского
  босса (`spawnNearby: true`).
- Пользовательское подкрепление унаследует агрессию пользовательского босса, которого оно усиливает, то есть будет
  атаковать игрока, который нанес наибольший урон (`inheritAggro: true`).
- Независимо от настройки в `test_boss.yml`, пользовательское подкрепление будет иметь тот же уровень, что и
  пользовательский босс, которого оно усиливает (`inheritLevel: true`).

```yaml
- summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL
  location: -80,10,0
  lightningRod: true
```

Это делает следующее:

- Создает пользовательское подкрепление.
- Пользовательским подкреплением будет кристалл края, который устанавливается при начале
  боя (`summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`).
- Кристалл края будет поражать землю вокруг с задержкой (`lightningRod: true`).

Теперь применим это к пользовательскому боссу:

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eХранитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
- summonType: ON_COMBAT_ENTER
  filename: test_boss.yml
  spawnNearby: true
  inheritAggro: true
  inheritLevel: true
- summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL
  location: -80,10,0
  lightningRod: true
```

И все готово! Вот еще несколько советов:

- Поля можно устанавливать в любом порядке, хотя рекомендуется всегда ставить `summonable` первым!
- Это значительное улучшение старой системы подкреплений, которая больше не указана. Не рекомендуется полагаться на нее
  в данный момент, так как она может перестать работать в будущем.
