# Создание Пользовательских Подкреплений

Если вы заинтересованы в призыве элит во время боя для усиления босса, это руководство подробно описывает этот процесс.

## Шаги по созданию пользовательского босса:

1. Создайте своего главного пользовательского босса, который будет призывать ваших пользовательских боссов.
2. Создайте пользовательского босса для подкреплений. Имейте в виду, что пользовательские боссы могут быть сильнее обычных мобов, но они также могут быть слабее.
3. Добавьте правильную строку подкрепления в файл конфигурации.

## Создание строки подкрепления

Предположим, у вас есть пользовательский босс в следующем формате:

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eПовелитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
```

И вы хотите добавить к нему подкрепления. Вот как может выглядеть одно такое подкрепление:

```yaml
- summonType:ON_COMBAT_ENTER
  filename: binder_of_worlds_phase_1_parkour_reinforcement.yml
```

И чтобы сделать его действительным, добавьте его в список powers:

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eПовелитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
- summonType: ON_COMBAT_ENTER
  filename: binder_of_worlds_phase_1_parkour_reinforcement.yml
```

Теперь подкрепление добавлено к сущности босса. Однако, как видите, здесь есть несколько опций, которые можно настроить. Давайте их рассмотрим.

## Все опции пользовательского подкрепления

*Совет: Вы также можете использовать EliteScript для вызова подкреплений, подробнее об этом [здесь]($language$/elitemobs/elitescript_actions.md&section=summon_reinforcement).*

<div align="center">

### summonType

Это обязательное поле. Оно устанавливает, когда должно появляться подкрепление.

| Ключ    |   Значения    | По умолчанию  |
|--------|:-----------:|:--------:|
| `summonType` | Специальное [1] | `ON_HIT` |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
summonType: ON_HIT
```

</div>

</details>

#### Специальное [1]

| Ключ | Описание                                                                                       |
|-----|---------------------------------------------------------------------------------------------------|
|  `ONCE`   | Вызывает подкрепление один раз, при первом попадании по боссу. (может зависеть от % вероятности) |
| `ON_HIT`  | Вызывает подкрепление каждый раз, когда по боссу попадают (может зависеть от % вероятности)             |
| `ON_COMBAT_ENTER`    | Вызывает подкрепление, когда босс вступает в бой (1)                                                                                                  |
| `ON_COMBAT_ENTER_PLACE_CRYSTAL`    | Специальное: специально для размещения кристаллов края для битв с драконом, когда босс вступает в бой(1)                                                                                                 |
| `GLOBAL`    |  Вызывает подкрепления для каждого игрока в том же мире, что и босс. Подкрепления появятся рядом с игроками, независимо от того, как далеко они находятся от босса. Для работы требуется установить поле `customSpawn`!                                                                                                 |

_(1) Боссы вступают в бой, когда по ним попадают игроки или когда они обнаруживают игрока в пределах досягаемости._

***

### filename

Это обязательное поле, поскольку оно определяет, какое подкрепление должно появиться. Единственным исключением из обязательности этого поля является использование параметра `summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`, поскольку кристаллы края не являются элитами.

| Ключ    |        Значения         | По умолчанию |
|--------|:---------------------:|:-------:|
| `filename` | [Имя файла](#filename) |  нет   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
filename: test_boss.yml
```

</div>

</details>

</div>

***

**Минимальная жизнеспособность**

`summonType: SUMMON_TYPE` и `filename: filename.yml` достаточно сами по себе, чтобы создать пользовательское подкрепление. Следующий пример демонстрирует это.

<div align="center">

<details>

<summary><b>Пример</b></summary>

<div align="left">

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eПовелитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
- summonType: ON_COMBAT_ENTER
  filename: binder_of_worlds_phase_1_parkour_reinforcement.yml
```

*Однако, если вам нужно что-то более сложное, продолжайте читать ниже, чтобы узнать, что еще можно сделать с этими параметрами.*

</div>

</details>

</div>

<div align="center">

***

### chance

Это необязательное поле конфигурации, предназначенное для дополнения параметров `summonType` `ONCE` и `ON_HIT`. Оно представляет собой вероятность появления пользовательского подкрепления, когда по боссу попадают.

| Ключ    |        Значения         | По умолчанию |
|--------|:---------------------:|:-------:|
| `chance` | [Число с плавающей точкой](#double) |  нет   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
chance: 0.5
```
*Представляет 50% вероятность появления Пользовательского Подкрепления.*

</div>

</details>

***

### location

`location: x,y,z` является необязательным полем конфигурации, которое позволяет администраторам смещать местоположение подкрепления на определенное количество блоков. Вот основные концепции, которые вам нужно знать об этой опции:

**Смещение местоположения относительно.** Это означает, что `location: 0,10,0` вызовет босса ровно на 10 блоков выше босса, а не в мировых координатах 0,10,0.

**Относительное расположение различается для региональных боссов.** Региональные боссы всегда будут использовать свою точку появления в качестве начала отсчета для относительного местоположения, что означает, что если вы знаете, где находится точка появления босса, и посчитаете блоки, вы можете заставить подкрепления боссов появляться в определенных местах. Логово Повелителя Миров полагается на это, чтобы вызывать боссов башни испытаний в чрезвычайно определенных позициях блоков, независимо от того, где находится босс-дракон.

**Боссы будут появляться внутри блоков, если вы ошибетесь в измерении расстояний.**

| Ключ    |      Значения       | По умолчанию |
|--------|:-----------------:|:-------:|
| `location` | [Строка](#string) |  нет   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
location: 0,10,0
```
*Для нерегионального Пользовательского Босса подкрепление появится ровно на 10 блоков выше босса, независимо от того, где он находится.*

*Для регионального Пользовательского Босса подкрепление появится ровно на 10 блоков выше точки появления регионального босса, независимо от того, где находится босс.*

</div>

</details>

_**Важное примечание: Это обязательное поле специально для `summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`!**_

***

### lightningRod

Это специальная настройка, полезная только для `summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`. Это дает кристаллам края возможность поражать молнией пол вокруг них с задержкой.

Его нельзя использовать с другими Пользовательскими Подкреплениями, поскольку они должны полагаться на силы для подобных способностей.

| Ключ    |       Значения        | По умолчанию |
|--------|:-------------------:|:-------:|
| `lightningRod` | [Логическое значение](#boolean) | `false` |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
lightningRod: false
```

</div>

</details>

***

### inheritAggro

Это необязательное поле конфигурации, которое заставляет Пользовательские Подкрепления наследовать уровни угрозы босса.

Это особенно полезно, когда вы хотите, чтобы подкрепления, которые появляются, нацеливались на человека, наносящего наибольший урон.

| Ключ    |       Значения        | По умолчанию |
|--------|:-------------------:|:-------:|
| `inheritAggro` | [Логическое значение](#boolean) | `false` |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
inheritAggro: false
```

</div>

</details>

***

### amount

Это необязательное поле конфигурации, которое устанавливает количество появляющихся Подкреплений.

| Ключ    |       Значения        | По умолчанию |
|--------|:-------------------:|:-------:|
| `amount` | [Целое число](#integer) |   `1`   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
amount: 1
```

</div>

</details>

***

### spawnNearby

Это необязательное поле конфигурации, которое определяет, должно ли пользовательское подкрепление появляться рядом, а не на вершине босса или в определенном относительном месте.

Этот метод должен правильно учитывать изменения рельефа и не создавать боссов внутри стен, хотя в некоторых конфигурациях это может привести к их появлению за стенами, если боевая зона слишком мала. Имеет радиус ~30 блоков.

| Ключ    |       Значения        | По умолчанию |
|--------|:-------------------:|:-------:|
| `spawnNearby` | [Логическое значение](#boolean) | `false` |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
spawnNearby: false
```

</div>

</details>

***

### inheritLevel

Это необязательное поле конфигурации, которое определяет, должно ли Пользовательское Подкрепление наследовать уровень Пользовательского Босса, которого оно усиливает.

| Ключ    |       Значения        | По умолчанию |
|--------|:-------------------:|:-------:|
| `inheritLevel` | [Логическое значение](#boolean) | `false` |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
inheritLevel: false
```

</div>

</details>

***

### customSpawn

Это поле конфигурации, которое используется только для глобальных подкреплений. Оно использует пользовательские настройки появления, чтобы установить, где подкрепления смогут появляться.

Это можно использовать, чтобы подкрепления могли появляться на поверхности, в местах со светом, в определенных биомах и так далее. Подробности смотрите на вики-странице [Пользовательские появления]($language$/elitemobs/creating_spawns.md)

| Ключ    |        Значения         | По умолчанию |
|--------|:---------------------:|:-------:|
| `customSpawn` | [Имя файла](#filename) |  нет   |

<details> 

<summary><b>Пример</b></summary>

<div align="left">

```yml
customSpawn: normal_surface_spawn.yml
```

</div>

</details>

</div>

## Сборка большого подкрепления

Давайте создадим пример подкрепления, используя большинство предыдущих полей:

```yaml
- summonType: ON_COMBAT_ENTER
  filename: test_boss.yml
  spawnNearby: true
  inheritAggro: true
  inheritLevel: true
```

Это делает следующее:

- Создает пользовательское подкрепление
- Пользовательское подкрепление появится, когда Пользовательский Босс вступит в бой (`summonType: ON_COMBAT_ENTER`)
- Вызванным Пользовательским Подкреплением будет то, которое из `test_boss.yml` (`filename: test_boss.yml`)
- Пользовательское Подкрепление появится в пределах 30 блоков от текущего местоположения Пользовательского Босса (`spawnNearby: true`)
- Пользовательское Подкрепление унаследует аггро Пользовательского Босса, которого оно усиливает, то есть оно будет атаковать игрока, который нанес наибольший урон (`inheritAggro: true`)
- Независимо от настройки в `test_boss.yml`, Пользовательское Подкрепление будет иметь тот же уровень, что и Пользовательский Босс, которого оно усиливает (`inheritLevel: true`)

```yaml
- summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL
  location: -80,10,0
  lightningRod: true
```

Это делает следующее:

- Создает Пользовательское Подкрепление
- Пользовательским Подкреплением будет Кристалл Края, который будет размещен при начале боя (`summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL`)
- Кристалл Края будет поражать землю вокруг с задержкой (`lightningRod: true`)

Теперь применим это к Пользовательскому Боссу:

```yaml
isEnabled: true
entityType: ENDER_DRAGON
name: $eventBossLevel &eПовелитель Миров
level: 200
powers:
- ender_dragon_arrow_bombardment.yml
- summonType: ON_COMBAT_ENTER
  filename: test_boss.yml
  spawnNearby: true
  inheritAggro: true
  inheritLevel: true
- summonType: ON_COMBAT_ENTER_PLACE_CRYSTAL
  location: -80,10,0
  lightningRod: true
```

И готово! Вот еще несколько советов:

- Поля можно устанавливать в любом порядке, хотя рекомендуется всегда иметь `summonable` первым!
- Это значительное улучшение старой системы подкреплений, которая больше не указана. На данном этапе не рекомендуется полагаться на нее, так как она может перестать работать в будущем.
